<!doctype html><html><head><meta charset="utf8"><title>uw8-run</title><style>html,body,canvas{background-color:#202024;margin:0;padding:0}html{height:100%}body{grid-template-rows:1fr;height:100%;display:grid}#screen{image-rendering:pixelated;border:4px solid #303040;place-self:center}#message{color:#c64;z-index:2;background-color:#0006;width:calc(100% - 16px);padding:8px;font:700 12pt sans-serif;position:absolute}@media (width>=648px) and (height>=488px){#screen{width:640px;height:480px}}@media (width>=968px) and (height>=728px){#screen{width:960px;height:720px}}</style></head><body> <canvas id="screen" width="320" height="240" tabindex="1"> </canvas> <div id="message"></div> </body><script type="module">function e(e){return e&&e.__esModule?e.default:e}var t={};t="data:application/wasm;base64,AGFzbQEAAAABFQRgAX8Bf2ACf38Bf2ADf39%2FAGAAAAIPAQNlbnYGbWVtb3J5AgAEAwkIAAABAgEAAAMGEAN%2FAUEAC38BQQALfwFBAAsHGQIIbG9hZF91dzgAAAp1bmNvbXByZXNzAAQIAQcKngUIxwEBB39BAC0AAEEBayIBQQBIBEAgAA8LQYDAByAAaiECIAFBAXEEQEEBQYHABxAEIQIFQYDAB0EAIAAQAwtBAEGAhA9BCBADQYiEDyEDQQghBEGBwAchBQNAIAUgAkggAyMATiAFLQAAIAMtAABMcnEEQCAEIAQgBRACIgZqIQQgAyMASCAFLQAAIAMtAABGcQRAIAMgAxABaiEDCyAFIAZqIQUMAQsgAyMASARAIAQgBCADEAIiB2ohBCADIAdqIQMMAQsLIAQLPAEEfyAAIQEDQCACIAFBAWoiAS0AACIEQf8AcSADdHIhAiADQQdqIQMgBEEHdQ0ACyABQQFqIABrIAJqCxIBAX8gACABIAEQASICEAMgAgskAANAIAJBAEoEQCAAIAJBAWsiAmogASACai0AADoAAAwBCwsLqQEBBn8gACQBQQAkAgNAIANBgAE6AICADyADQQFqIgNBgQNIDQALAkADQEEAEAYiBQRAIAQEf0EBBUGAAhAGCwRAQYECEAVBAWsiAkUNAwtBwQIQBSEGA0AgASABIAJrLQAAOgAAIAFBAWohASAGQQFrIgYNAAsFQQEhBwNAIAdBAXQgBxAGciIHQYACSA0ACyABIAc6AAAgAUEBaiEBCyAFIQQMAAsLIAELNAECfwNAIAAgAmoQBgRAIAEgACACakEgahAGIAJ0ciEBIAJBAWohAgwBCwsgAUEBIAJ0cgtxAQR%2FA0AjAkGAIEgEQCMCQQh0IwEtAAByJAIjAUEBaiQBDAELCyMCQf8BcSICIAAtAICADyIBIwJBCHUiA2xBgAIgAWsgA2wgAWsgAiABSCIEG2okAiAAIAFBByAEQYECbGogAWtBBHVqOgCAgA8gBAsMAEEAQYCEDxAEJAALC60EAQBBAAumBBf%2FyMx3cvbPLfDyK1Bb4IburZYc9i%2BGTsS3j6O4M0o%2Bl2NUQ%2B88SSzybjKLNViVnmhuM%2FZ6LyqKG10doX6mhidmH1yW84EJfcqSXy6pUuF8h7prEGKBJPbIG0yhSUUWuzMrdRxzE4okeNRo4cs%2FsVhtCh4Vai9OQbuu9AZbIpuNDXWOFbj927WcryfPy4dsdT0B%2BA3x1gqXPq2rgI2fI0dNid3EJDTBr3SZWQObkiDldI5YJ17KFwjme3ofejUZT6xP3cNY2XdcosNxULga5hpnvQxV%2F1YKYfeYBVnZ6mAPyIx6Ayl4uxPFNpFdkNv28D%2Bv4X4QS%2BMYgr%2BrLsNAjif5Pz0lVPDBHkx%2BuqJN9SHrb6uRHqvwoVNuRbgn4alMggAWdV0rqmwCXlsmJyzwX%2BrWtH7BoosSlavxs%2BMUTI%2BFXunhVtt5mz3HYy3%2BxBJXF%2FhLWKUPw8vHxoEt%2BBpGDuMK8%2B1ew3pagPiQ7PV7YPWeoHyEKBM92UbyjbJx7HBp7Gh31ZwL9x%2B1sj0ogjs4HLke4hPdXR2o%2F%2BO67SYnX8CPp6YygTuddCxYwU6eHzYFFpwQuzKCVNPXyJKX4HVPJnysHBj5ygPItuS0NZqGlhpzEbgDf%2FJbIQgHzmNotsi6ErQdaigmn0dopO1ybwjbUWZ1kcZmOiBxcoNYSZVtW9mWKfn52kTNDn0QlwZz1slXrqIcx%2BMVVGeIZ9Y5hThIK3lyj%2BL9o%2Fo%3D";var B={};B="data:;base64,AiHfzO34vaTkrd2eAWsXmnk6O0saNxyBOKpKJ4gIZgTFyYLQaErZlwVOzFHSIEwVOdwimalCVY189KvAjT1MA27zTIMgHP7UatKxjcsK5BFbXOHvjhm%2FLesv0gorLh3%2Bp4VSOVvsomIiXDlLL175jQw%2FbY3NPCAhv3e8gH24nzYFr4u3WeQHbVbcFOTxKFGLYMNOsU2QjF2XaPOdZFP32e58qAST0gBwmSKO6tuZq7JVC68uBldt4wWCJEbQqqENSUe5rtcAfyaSRf3gzZ3t3PgnwZHp6%2Fr0cjPo8rqIhvmzkLWI2m4jPwHc8k4s87Gjgpc4YQeipZW9q4PGqym6pnlfUAA8lRaqIo9U%2BnyqAMiI37LAL%2FqtHCi8JG1ByCyw6d9Pf7TLrazkjNNHPa5IJV%2BD8KUJQcCDLquYfrU2baSeirg4QH64Pxevmuo5j9pF97P%2FrfT18mBqcFoba%2Bc1jAeWPRoOSmD9M%2FPIsO1a%2F4bjFd0Uuru95ilanB4yFg4tk9FRqP2zJPk0T4LAzWMXzSX8%2F0VBgOogv%2BniB0XHFmaXv%2BG0PqGrx2sDO2N%2Fi98A3DdQyry%2Fs1%2Bb8mid6w7g5mptwhx561baq1syBSrGSJLqcDAutTh8uXZYvVXbFVzmxfLpAxsR898NHK51FkzqvkxeaNnYbCkC19jhJaslZ1E0vdpidtMzv1uwHCp986mNDT3qK4nWbwOpG52kVtkmac18T9g428D%2BeyJW82GG1hJmGV%2F39FlEB5hxbyFZINNLLAfNwG08itW25ATJ7QxZ%2FAX8zoz%2FT7oLugeHUeMBtvBF%2Bt40Wh2n%2FvjehShTKyMYUvlDZTTzBq34hcaBhCNCHTEHV8bRzoBK3%2Fx0qmeTW2l8vG7KCizhl8VoxALJiY84Isnu1OAS8vKw35FHVUWXDfXLUJw0WooJ%2BdxHnwkxlGBfeNGdWY0zJyRe3CgvsBiGlxC5nABF4pFYBMEOIGR6ev%2F3rrkXL34LdvKr2PkRuMr1gjvb8gGszxhBS40uxdOoWZLRyLA5OZ07W5nHTFbL5l6wKfJrIbrl8ZRamKdD5IXHETRJZq%2BlF3KOS0Jug3R8cjVTtBWYH4QDRXEym7uWNetxnlA5tTOl9kl811ZJeAM2A8TwUY%2FZdnIoPSqf5gUCE%2BcUvdRo55HwOX%2FONuPrPGxNEYIklsAJJlz0ElYqE3NVSphMj3u7re%2F5b%2Fpdf2kWhkJNIdLvvXng6YXb5RM4%2BtqFvQDNV%2FYrEnk4RuFORPr2gwu6%2FllhKTq8RPiV%2FblJi2QsxJnwlFraEsbG3l4E%2FXsovrzL38DcEhBo7wfBSc8JHfs4tMYKHDxzrkUp0Ge01YMKzvvWjrpXrS0Dszq5B5WUA3JOuIBrq6GPuOdFhrJ6Fj7kX3iuWhGxpXrxiyMP%2BE4ax9UTCBGnvV7Nz1wE1gHFVe%2FN%2FoVjMZqV4vhzuVyf%2FEifKcdy1P4dVr6JG6Dw%2FcYvPlvqTtfCo1Khl5In1IrxmO5Hhq8ytKIKG9vTeeCqFXjVMCR9vfkCGyMi%2FbOdvNj6b%2Bq0ijT%2FyxZEp0kb7RSaN%2BihR75CGv7qkh8fy5qZmNYTNxFB5K%2F95iN70AZ8xZwKmOMJ7qbBzNj4j7fyl2zFz2SBLEWrSxhsGXkGjJ7OJmKJhLv8YQNTZij5u4F%2BUGB8GQhVZxmd381jEs4J2fsfbymks0lLC9BhIuCjK%2FTD28z1r7Kw%2Fnk97YXukMfBrNql3Bgh84neyaijJtxmMtuY6rb3CxPYBBQ0xMF%2FI7y6GqQL3xC9SuH5T0q%2FUjPliNfNsZEPgQ7o33%2BM80WMQELh8YeQsBIagyeql1ifqUUZ7hbSygRpIw76Fi7cVCJtaSZzH%2F8CzuoIjbHHWASBtQfLFB2vboh6UuhkyQB4igq0JskQIpQUMQB3wfXs%2BX4La3LtcQfiLkrMDRuqEn0LBhq8pktJvJZvpDtTShpTWpe0F6N43zx0Tk7lxF1awWFSz%2Bw%2B8PR%2BDd70VPEdaOWGxaSXZfnvo5R5wGccKJl0xsCkCZPuh%2BoK5OSHSOQr4eKb561cvGfpj0oO2dpCuIgaDs0r%2B%2BiDwdP2FQkQjyLZKE%2F4OF%2BuzbR9U47GeWrcF0n%2FBUd1VmNDibVX9Fue6C6ssuz8DeiRfXr1gy1w6MeBFXipcCqPm4tDpLbjyncb1A6tXEpAG4kJff0WFLsAtoHJjQLEDzcLBBTWUedmJhr4cOuvOMLpkkKMRE1UDoSkh125vqlARIYGSYpMTjVXIH8Ax2tshe%2BWKuRZxQUxiK6PRldTaJbZhYZfC1i%2BEemNES%2B1LyttebvfxZPIbzaOvfkG0fS6mc5dDdDMyEfsycEp5OkTA6%2F6ewhD6Z51qXmOaNxhcJ1zvAqaQ0jusuCm%2B%2Fwi%2BIbfJH1CQ4rDMebg1v%2FZy9RyVxBcHF7MxkMnN21TZ5iYomXJsJhNrsD8i5OXPwt2CpXVpFpXdxJU%2BIYc%2BucHA15M%2BA%2Bo3SaWgHw3GIjEVsEESfIBiY%2Baek%2BOKLz3xWKv80%2FVNxgy33z3KhsPZ81FMAsH%2BzP77yKwgykTqdarL0SpkTRxJ%2FVNAajJzqRFb1yJpLS7%2Bc%2Bf%2FSY7Z5lejiWfKyZyxL7wNoRK3DlSaY14DdoGhS3c15xbh2CiUEsVEujnpZmy4w9zSgFZJRBK00M04nV446jxbZ8W8maCHB3SIvLTugGKqHuT%2FwxXTI7IXHLRmrpY%2FMi26u8K2HdYYgeTXUeC7n4UE2VK1Cxi6JbFUvhi7SEz4jht8yyEMpITeo%2BEbHIZz8YOwsaBLZ0w%2BlCEDKP0QAugaDHgpzAZ%2BPrEHb6kerMv8SVcl%2FWfhbhLnElIH%2F6l%2F3iKJe2yOwz4fHIXHSxNbU9xU9gemVvmIICYOWNWJ7I4wfd0dFRT2HxmNOcEIq%2BJADv71LlaE1rauOy48kb874Ib2WPDd%2FrGCf%2FwsF8OFtgL2jk3GSS5j9ZRFTycsc%2B5Lym7LfBesZ3UqQr45nR2FCtMQxz5IIuDro5dW1ZbBM5UGuSVn%2B6z5hsXqeCK9cqIo%2F4o92AxIfq87%2B8VdbdChDjHifH6tbMAToCRfunjdOkA5WXNXfDxHWDtvLeqMnX40ld9hx9Odrg6hZWCELq39JGIFihQvkzrrSFIy1TUv9eH44jFeB%2FqeBtxJ%2FGW7VSySHLFlfnSZD0NeRNTsJ%2FyELSj6NRQgoMxc2q84189jVOtlxOI%2By4Un97SKOqdlxA9Db%2BMyIJ3VWSmcnnxygjXKFX12R4fMeCtAxhSLDl35EtM91qUw%2FYVJICNnVtdEnTpn9PSa1260tmTGIDOBfj0f6DIE9NyBOLtqyyyjTgL%2BT8xHMEfMBf81yBySqbYA7LmQjXqtTiRP3BMMxGR2Gjem%2BwgvNEU6vW15o8tKVnVEM%2Foo4m%2BZoYdPemA15873RU41BFLAqk%2FUIrq%2BsAekuFe6%2FD2zquzCeu3hSuF97XPhpwMsG8PdKp5gr8xw1lDiSI1GfkJiOxS0FSOzGUWDFbHr2bBa789Lqx77zJlzYvdEtBiEDMWSvTiQErBTyT0%2BB%2FzR2yXmGuJFBNvgH58jX3W%2BVzjqzn9Y5OiyQlyudP3G5n6be5Tv3xaqyXquR7Rfv%2F4nc6occM3L0vPZNK788o9%2FehIKM8NvZg90Z9s%2BoI%2BoWEXwPm%2FnQ15Qy3ErvDRQhos%2F4dugyDZMrgFAORjdw%2FBbdCtOPxvoTTU%2FOC8EEiAiGDkDDctcg4Hej%2BG71FMsF4Z5ShOA3io3EMqb%2B0Vzj9uVV4J1EKGK8tDr99xuPRKc2j31mxHCBnTn9oeXftoF6%2FT3xYDpU7GwUgj79uVngWaGCSImcW4vK2SvvvfRhIiV0k1D0376ZLj%2B0ZfqP94rWo1RjQVv01WGceNq4pPgD9ntbwhNOUZv7ctMapgGfA9DN0PF1XyIjL99ESv9KpD6L3vxaNKHFoIAxNu6yXNTqyh%2FnXfVlTOZvIfMsohKG9ryYm5fpdQ60fbztfMWpUmDgoGWqG%2Fa9t96bTOz2ZhXe6tLj0QAKl2mdE9pyfHO%2BfwgJSvjOic5dLWv5OUpEqdWhnuP48iH6XKMSqmcHVixoKC6trqP2ArbXdD6CRHX7OLBGRlCzegEDXGuJv7KcPyBMQEagTUrOJZxZ2BOiovsNPqWG5hHxdDRoZa9AOkObfE6knNmv6PR9fUqYsx2%2B2%2Blj6%2FQ4azl0B0MQf76Y4BOAxzOzBW5Gt0QHhlykSt5zoUc1FPJmDGz9b2TAbYGhANIDG1rGT97NPLythqsFkrBOmNFSOWQPO095ov8rcfV18UHccRfOt8V2f9cl0XE0IBcjD2Gr8coa1LJ9gxmLOa9%2B0%2FoTzwFJmGBvEVsP4Kh77v%2B4ffyZrLlG9sGIgxB8kAXrhyEWv2I59Y76So0Yywz41xHl07knfyD7InPOPjl4oTzd3WCliucR%2Ba%2F%2BLNyf0O%2FtugHMGN5c3yp2sH4zyTdLcvrt2cWCbnQOpUyRQpQoVnr4kPQD%2FR0cvKEzguszhlA4KSVBLYdVljjzJCezxbDyedTSnoIEgtMa4ENJmhsrQ0BbL5a%2BQICui7NNuqx5j6NX0Wfhf9hsiAsDISt%2F13tMyaK%2Fh3rahcBXNpe4iYrLpu9dH2Xncl8HBVZ3RLwgqi2IQcE9bdCxyqJpDzPOAgpYNjZyPfoE41wowkSWrZorrOiE4BwJpdR3jZsbNEwW%2Fk%2B6WiBNyraNTuMWUCVVTfQUtyttvZGoNPxGGlOKh6DGP4aSlH7b2OLtVnUUB1we6XHRooryCeM5pdCBurqGWSOIajmKIiRswYazeg0eDhgvPF8NTBpi%2FwoMW9iWMWvdn26tMPK2H0yjD%2FmSVF0PvvOhEPbCbFSlwP8L%2Frj9dzfGqb4hTq4%2BOZD%2BRsQSriR1rc9QllvdGiXUdehyvVUheIHm6ELgHHZ4GwOJJcSj9L6GdvlYv1Bn09PuYzjXWF26b3bhOF7K175crDm9VB0zRFEGWYH0qZ2VtMI8CKpLeG2FSi%2BA1kjPZm5oV2GWseL2w229cfiAFTu1qupjWl0Fm1x27Jsw5i8HLV0z5BEp4m5FkZF0JhRhTiB5nNoZNYmIiKwlWt0vzsvAD849DzodAFKwjA3NzTC0YVmK7RmVcedZXCgv3HIjLVExTbMHYd5YNaTgP5YkNY0aWrvQOeKoH6pmITYrg7PA72FHrgd3%2FnzBqRvtvV1WtpgLHC5M9o1dvJo1G8%2BFkbxSaDEu3KBSBO47Xl5h0jp2lRSqc5xZntzgaHL%2FY5UDgiCWlLXosg%2BkB2LMRTuXoO4%2BakQM%2Funr2ezKkHfCIv5QjxGWb2UMVqKA9kFxxy8eiIHJDk1SBKSybEj8KHcwgBecXEhcvk3QShJboUK7bhcHAyfteUUppD8vqMqEuRyiDy9IrpbE8U%2FRJqYGXpS0hCkDE7nAsGAmY7Ut9TPQRDNSIMW1eyqHvofwZYVs%2BPr016xhGUbbOuLmtGpULN7tYq8K6pmM6QAbDbw8g8ruusNwnjhR1oOOAapS0%3D";var s={};s="data:application/javascript,let%20e%3D%28...e%29%3D%3Enew%20Uint8Array%28...e%29%3Bclass%20s%20extends%20AudioWorkletProcessor%7Bconstructor%28%29%7Bsuper%28%29%2Cthis.sampleIndex%3D0%2Cthis.currentTime%3D0%2Cthis.isFirstMessage%3D%210%2Cthis.pendingUpdates%3D%5B%5D%2Cthis.port.onmessage%3De%3D%3E%7Bthis.memory%3F%28this.isFirstMessage%26%26%28this.currentTime%2B%3D%28e.data.t-this.currentTime%29%2F8%2Cthis.isFirstMessage%3D%211%29%2Cthis.pendingUpdates.push%28e.data%29%29%3Athis.load%28e.data%5B0%5D%2Ce.data%5B1%5D%29%7D%7Dasync%20load%28e%2Cs%29%7Blet%20t%3Dnew%20WebAssembly.Memory%28%7Binitial%3A4%2Cmaximum%3A4%7D%29%2Ci%3D%7Benv%3A%7Bmemory%3At%7D%7D%3Bfor%28let%20e%20of%5B%22acos%22%2C%22asin%22%2C%22atan%22%2C%22atan2%22%2C%22cos%22%2C%22exp%22%2C%22log%22%2C%22sin%22%2C%22tan%22%2C%22pow%22%5D%29i.env%5Be%5D%3DMath%5Be%5D%3Bfor%28let%20e%3D9%3Be%3C64%3B%2B%2Be%29i.env%5B%22reserved%22%2Be%5D%3D%28%29%3D%3E%7B%7D%3Blet%20r%3D%22%22%3Bi.env.logChar%3De%3D%3E%7B10%3D%3De%3F%28console.log%28r%29%2Cr%3D%22%22%29%3Ar%2B%3DString.fromCharCode%28e%29%7D%3Bfor%28let%20e%3D0%3Be%3C16%3B%2B%2Be%29i.env%5B%22g_reserved%22%2Be%5D%3D0%3Blet%20n%3Dasync%20e%3D%3E%28await%20WebAssembly.instantiate%28e%2Ci%29%29.instance%2Ca%3Dawait%20n%28e%29%3Bfor%28let%20e%20in%20a.exports%29i.env%5Be%5D%3Da.exports%5Be%5D%3Blet%20o%3Dawait%20n%28s%29%3Bthis.memory%3Dt%2Cthis.snd%3Do.exports.snd%7C%7Ca.exports.sndGes%2Cthis.port.postMessage%282%29%7Dprocess%28s%2Ct%2Ci%29%7Bif%28this.isFirstMessage%3D%210%2Cthis.snd%29%7Bfor%28%3Bthis.pendingUpdates.length%3E0%26%26this.pendingUpdates%5B0%5D.t%3C%3Dthis.currentTime%3B%29e%28this.memory.buffer%2C80%2C32%29.set%28e%28this.pendingUpdates.shift%28%29.r%29%29%3Bnew%20Uint32Array%28this.memory.buffer%29%5B16%5D%3Dthis.currentTime%3Blet%20s%3Dt%5B0%5D%2Ci%3Dthis.sampleIndex%2Cr%3Ds%5B0%5D.length%3Bfor%28let%20e%3D0%3Be%3Cr%3B%2B%2Be%29s%5B0%5D%5Be%5D%3Dthis.snd%28i%2B%2B%29%2Cs%5B1%5D%5Be%5D%3Dthis.snd%28i%2B%2B%29%3Bthis.sampleIndex%3D4294967295%26i%2Cthis.currentTime%2B%3Dr%2F44.1%7Dreturn%210%7D%7DregisterProcessor%28%22apu%22%2Cs%29%3B";class A extends AudioWorkletNode{constructor(e){super(e,"apu",{outputChannelCount:[2]})}}let a=(...e)=>new Uint8Array(...e),r=(...e)=>new Uint32Array(...e),o=function(o,n={}){let i,l,F,d,D,g,u,c;n.setMessage||(n.setMessage=(e,t)=>{t&&console.log("error: "+t)});let h=o.getContext("2d"),y=h.createImageData(320,240),f=n.devkitMode,E=0,C=void 0==n.keyboardElement?o:n.keyboardElement;if(C){let e=e=>{let t,B="keydown"==e.type;switch(e.code){case"ArrowUp":t=1;break;case"ArrowDown":t=2;break;case"ArrowLeft":t=4;break;case"ArrowRight":t=8;break;case"KeyZ":t=16;break;case"KeyX":t=32;break;case"KeyA":t=64;break;case"KeyS":t=128;break;case"KeyR":B&&I(l,!0);break;case"F9":B&&o.toBlob(e=>{w(e,".png")}),e.preventDefault();break;case"F10":B&&function(){if(D){D.stop(),D=null,u.disconnect(c),u=null,c=null;return}let e=o.captureStream();c=F.createMediaStreamDestination(),u=d,d.connect(c),e.addTrack(c.stream.getAudioTracks()[0]);let t=[];(D=new MediaRecorder(e,{mimeType:"video/webm",videoBitsPerSecond:25e6})).ondataavailable=e=>{t.push(e.data)};let B=n.timerElement;B&&(B.hidden=!1,B.innerText="00:00"),D.onstop=()=>{B&&(B.hidden=!0),w(new Blob(t,{type:"video/webm"}),".webm")},D.start(),g=Date.now(),setTimeout(function e(){if(g){if(B){let e=Math.floor((Date.now()-g)/1e3);B.innerText=Math.floor(e/60).toString().padStart(2,"0")+":"+(e%60).toString().padStart(2,"0")}setTimeout(e,1e3)}},1e3)}(),e.preventDefault()}B?E|=t:E&=~t};C.onkeydown=e,C.onkeyup=e}async function I(D,g){let u;i&&(i(),i=null),F=new AudioContext({sampleRate:44100});let c=!0,C=new AbortController;i=()=>{F.close(),c=!1,C.abort()};let w=D.byteLength;if(n.setMessage(w),0==w)return;await F.audioWorklet.addModule(e(s)),d=new A(F);let m=0,p=new Promise(e=>u=e),b=e=>{3==(m|=e)&&u&&(u(!0),u=null)},Q=()=>{"suspended"==F.state?(n.startButton&&(n.startButton.style="",o.style="display:none"),(n.startButton||o).onclick=()=>{F.resume()}):(n.startButton&&(n.startButton.style="display:none",o.style=""),b(1))};F.onstatechange=Q,Q(),l=D;let x=window.location.pathname;if(w<=1024&&!g){let e="";for(let t of a(D))e+=String.fromCharCode(t);(x+="#"+btoa(e))!=window.location.pathname+window.location.hash&&history.pushState(null,null,x)}o.width=o.width;try{let s,A={initial:4};f||(A.maximum=4);let o=new WebAssembly.Memory(A),i=a(o.buffer),g={env:{memory:o}},u=e=>{if(s&&(!f||0!=a(e)[0])){i.set(a(e));let t=s.exports.load_uw8(e.byteLength);e=new ArrayBuffer(t),a(e).set(i.slice(0,t))}return e},m=async e=>(await WebAssembly.instantiate(e,g)).instance,Q=async e=>u(await (await fetch(e)).arrayBuffer());for(let B of(s=await m(await Q(e(t))),["acos","asin","atan","atan2","cos","exp","log","sin","tan","pow"]))g.env[B]=Math[B];for(let e=9;e<64;++e)g.env["reserved"+e]=()=>{};let x="";g.env.logChar=e=>{10==e?(console.log(x),x=""):x+=String.fromCharCode(e)};for(let e=0;e<16;++e)g.env["g_reserved"+e]=0;D=u(D);let v=await Q(e(B));d.port.onmessage=e=>b(e.data),d.port.postMessage([v,D]);let M=await m(v);for(let e in M.exports)g.env[e]=M.exports[e];let S=await m(D),L=r(y.data.buffer);await p;let G=Date.now(),N=0,k=1e3/60;d.connect(F.destination);let q=!1,H=G,T=e=>{let t=Date.now();e?(q=!1,F.resume(),G+=t-H):(q=!0,F.suspend(),H=t)};window.addEventListener("focus",()=>T(!0),{signal:C.signal}),window.addEventListener("blur",()=>T(!1),{signal:C.signal}),T(document.hasFocus()),S.exports.start&&S.exports.start(),function e(){if(c)try{let t,B=!1;if(q)t=Date.now();else{let e=navigator.getGamepads(),s=0;for(let t=0;t<4;++t){let A=e[t];if(A){for(let e=0;e<8;++e){let B=(e+12)%16;A.buttons.length>B&&A.buttons[B].pressed&&(s|=1<<8*t+e)}if(A.axes.length>1)for(let e=0;e<4;++e){let B=A.axes[1-(e>>1)];(1&e?B:-B)>.5&&(s|=1<<8*t+e)}A.buttons.length>9&&A.buttons[9].pressed&&(B=!0)}}let A=r(o.buffer),n=Date.now()-G;A[16]=n,A[17]=E|s,A[18]=N++,S.exports.upd&&S.exports.upd(),M.exports.endFrame();let l=new ArrayBuffer(32);a(l).set(a(o.buffer,80,32)),d.port.postMessage({t:n,r:l},[l]);let F=r(o.buffer,77824,1024);for(let e=0;e<76800;++e)L[e]=4278190080|F[i[e+120]];h.putImageData(y,0,0);let D=(6*n%100-50)/6;t=G+n-D/8}let s=Date.now(),A=Math.max(t+k,s);B?I(l):window.setTimeout(e,A-s)}catch(e){n.setMessage(w,e.toString())}}()}catch(e){n.setMessage(w,e.toString())}}function w(e,t){let B=document.createElement("a");B.href=URL.createObjectURL(e),B.download="microw8_"+new Date().toISOString()+t,B.click(),URL.revokeObjectURL(B.href)}async function m(e,t){let B=await fetch(e),s=B.headers.get("Content-Type");return!(s&&s.includes("html"))&&200==B.status&&(I(await B.arrayBuffer(),t||f),!0)}return{runModule:I,runModuleFromURL:m,setDevkitMode:e=>f=e}}(document.getElementById("screen"),{setMessage:(e,t)=>{let B=document.getElementById("message");t&&(B.innerText=t),B.hidden=!t}});new EventSource("events").onmessage=e=>{console.log(e.data),"L"==e.data&&o.runModuleFromURL("cart",!0)},o.runModuleFromURL("cart",!0);</script></html>